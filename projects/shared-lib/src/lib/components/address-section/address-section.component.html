<!-- @if(isLoading){
<div class="loader d-flex align-items-center justify-content-center">
  <div class="spinner-border spinner-border-lg text-primary" role="status"></div>
</div>
} -->

@if(!isLoading){
  <div class="top-section d-flex align-items-center border-bottom pb-2 mb-4 px-3 px-md-0">
    <h3 class="fs-20">Manage Addresses</h3>
    <button type="button" class="shop-btn ms-3 fs-12 sm-btn" (click)="openAddressPopup()">Add New Address</button>
  </div>
<div class="address-container">
  <div class="profile-section address-section addresses px-3 px-md-0">
    <div class="row g-3">
      @for(item of addressListData; track $index;let i= $index){
      <div class="col-md-6">
        <div class="seller-info border rounded py-2 px-3">
          <h5 class="heading mb-2 d-flex align-items-center border-bottom pb-2">
            <span class="me-auto text-capitalize fs-18"
              >{{ item.type.toUpperCase() }}
              @if(item.is_default == 1){
              <i class="ms-2 fa fa-check fa-sm text-success"></i>
              }
            </span>
            <button class="btn border actionIcon" (click)="editAddress(item)" title="Edit your address">
              <i class="fa-solid fa-pen-to-square fa-sm"></i>
            </button>
            <button
              class="btn border ms-2 actionIcon"
              data-bs-toggle="modal"
              data-bs-target="#removeAddress"
              (click)="setDeleteId(item.id)"
              title="Delete your address"
            >
              <i class="fa-solid fa-trash fa-sm"></i>
            </button>
          </h5>
          <div class="info-list">
           
            <ul class="d-flex flex-column gap-2">
              <li>
                <span class="info-title d-inline-block fw-semibold">Name :</span> {{item.name}}
              </li>
              <li>
                <span class="info-title d-inline-block fw-semibold">Email :</span
                >{{ currentUser.user.email }}
              </li>
              <li>
                <span class="info-title d-inline-block fw-semibold">Phone :</span>{{item.phone}}
              </li>
              <li>
                <span class="info-title d-inline-block fw-semibold">City :</span>{{item.city}}
              </li>
              <li>
                <span class="info-title d-inline-block fw-semibold">Zip :</span
                >{{ item.postal_code }}
              </li>
            </ul>
          </div>
        </div>
      </div>
      }

      <div class="col-lg-6">
        <!-- modal -->
        <div class="modal-wrapper submit">
          <div class="anywhere-away"></div>

          <!-- change this -->
          <div class="login-section account-section modal-main">
            <div class="review-form">
              <div class="review-content">
                <h5 class="comment-title">Add Your Address</h5>
                <div class="close-btn">
                  <img src="../images/homepage-one/close-btn.png" alt="close-btn" />
                </div>
              </div>
              <div class="account-inner-form">
                <div class="review-form-name">
                  <label for="firstname" class="form-label">First Name*</label>
                  <input type="text" id="firstname" class="form-control" placeholder="First Name" />
                </div>
                <div class="review-form-name">
                  <label for="lastname" class="form-label">Last Name*</label>
                  <input type="text" id="lastname" class="form-control" placeholder="Last Name" />
                </div>
              </div>
              <div class="account-inner-form">
                <div class="review-form-name">
                  <label for="useremail" class="form-label">Email*</label>
                  <input
                    type="email"
                    id="useremail"
                    class="form-control"
                    placeholder="user@gmail.com"
                  />
                </div>
                <div class="review-form-name">
                  <label for="userphone" class="form-label">Phone*</label>
                  <input
                    type="tel"
                    id="userphone"
                    class="form-control"
                    placeholder="+880388**0899"
                  />
                </div>
              </div>
              <div class="review-form-name address-form">
                <label for="useraddress" class="form-label">Address*</label>
                <input
                  type="text"
                  id="useraddress"
                  class="form-control"
                  placeholder="Enter your Address"
                />
              </div>
              <div class="account-inner-form city-inner-form">
                <div class="review-form-name">
                  <label for="usercity" class="form-label">Town / City*</label>
                  <select id="usercity" class="form-select">
                    <option>Choose...</option>
                    <option>Newyork</option>
                    <option>Dhaka</option>
                    <option selected="">London</option>
                  </select>
                </div>
                <div class="review-form-name">
                  <label for="usernumber" class="form-label">Postcode / ZIP*</label>
                  <input type="number" id="usernumber" class="form-control" placeholder="0000" />
                </div>
              </div>
              <div class="login-btn text-center">
                <a class="shop-btn">Add Address</a>
              </div>
            </div>
          </div>
        </div>
        <!-- } -->
  
        <div class="col-lg-6">
          <!-- modal -->
          <div class="modal-wrapper submit">
            <div class="anywhere-away"></div>
  
            <!-- change this -->
            <div class="login-section account-section modal-main">
              <div class="review-form">
                <div class="review-content">
                  <h5 class="comment-title">Add Your Address</h5>
                  <div class="close-btn">
                    <img src="../images/homepage-one/close-btn.png" alt="close-btn" />
                  </div>
                </div>
                <div class="account-inner-form">
                  <div class="review-form-name">
                    <label for="firstname" class="form-label">First Name*</label>
                    <input type="text" id="firstname" class="form-control" placeholder="First Name" />
                  </div>
                  <div class="review-form-name">
                    <label for="lastname" class="form-label">Last Name*</label>
                    <input type="text" id="lastname" class="form-control" placeholder="Last Name" />
                  </div>
                </div>
                <div class="account-inner-form">
                  <div class="review-form-name">
                    <label for="useremail" class="form-label">Email*</label>
                    <input
                      type="email"
                      id="useremail"
                      class="form-control"
                      placeholder="user@gmail.com"
                    />
                  </div>
                  <div class="review-form-name">
                    <label for="userphone" class="form-label">Phone*</label>
                    <input
                      type="tel"
                      id="userphone"
                      class="form-control"
                      placeholder="+880388**0899"
                    />
                  </div>
                </div>
                <div class="review-form-name address-form">
                  <label for="useraddress" class="form-label">Address*</label>
                  <input
                    type="text"
                    id="useraddress"
                    class="form-control"
                    placeholder="Enter your Address"
                  />
                </div>
                <div class="account-inner-form city-inner-form">
                  <div class="review-form-name">
                    <label for="usercity" class="form-label">Town / City*</label>
                    <select id="usercity" class="form-select">
                      <option>Choose...</option>
                      <option>Newyork</option>
                      <option>Dhaka</option>
                      <option selected="">London</option>
                    </select>
                  </div>
                  <div class="review-form-name">
                    <label for="usernumber" class="form-label">Postcode / ZIP*</label>
                    <input type="number" id="usernumber" class="form-control" placeholder="0000" />
                  </div>
                </div>
                <div class="login-btn text-center">
                  <a class="shop-btn">Add Address</a>
                </div>
              </div>
            </div>
            <!-- change this -->
          </div>
        </div>
      </div>
      <app-no-data
        *ngIf="!addressListData || addressListData.length === 0"
        title="No Address Found"
        message="There are no data available right now."
        [showAction]="false"
        actionText="Reload"
      >
      </app-no-data>
    </div>
  </div>
  
  <!-- Edit address Modal -->
  <div
    class="modal fade"
    id="editAddress"
    tabindex="-1"
    aria-labelledby="editAddressLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header py-2">
          <h1 class="modal-title fs-5" id="editAddressLabel">Edit Address</h1>
          <button type="button" class="btn-close close-btn" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- <form [formGroup]="checkoutForm">
                  <div class="review-form">
                    <div class="account-inner-form">
                  
                      <div class="review-form-name">
                        <label for="fname" class="form-label">First Name*</label>
                        <input
                          type="text"
                          id="fname"
                          class="form-control"
                          placeholder="First Name"
                          formControlName="fname"
                        />
                        @if (hasError('fname', 'required')) {
                        <small class="text-danger position-absolute">First name is required</small>
                        } @if (hasError('fname', 'minlength')) {
                        <small class="text-danger position-absolute">Minimum 2 characters</small>
                        }
                      </div>
  
                  
                      <div class="review-form-name">
                        <label for="lname" class="form-label">Last Name*</label>
                        <input
                          type="text"
                          id="lname"
                          class="form-control"
                          placeholder="Last Name"
                          formControlName="lname"
                        />
                        @if (hasError('lname', 'required')) {
                        <small class="text-danger position-absolute">Last name is required</small>
                        }
                      </div>
                    </div>
  
                    <div class="account-inner-form">
                      
                      <div class="review-form-name">
                        <label for="email" class="form-label">Email*</label>
                        <input
                          type="email"
                          id="email"
                          class="form-control"
                          placeholder="user@gmail.com"
                          formControlName="email"
                        />
                        @if (hasError('email', 'required')) {
                        <small class="text-danger position-absolute">Email is required</small>
                        } @if (hasError('email', 'email')) {
                        <small class="text-danger position-absolute">Enter a valid email</small>
                        }
                      </div>
  
                      
                      <div class="review-form-name">
                        <label for="phone" class="form-label">Phone*</label>
                        <input
                          type="tel"
                          id="phone"
                          class="form-control"
                          placeholder="+910000000000"
                          formControlName="phone"
                        />
                        @if (hasError('phone', 'required')) {
                        <small class="text-danger position-absolute">Phone is required</small>
                        }
                      </div>
                    </div>
  
                    <div class="account-inner-form">
                  
                      <div class="review-form-name address-form w-100 my-0">
                        <label for="country" class="form-label">Country*</label>
                        <select
                          id="country"
                          class="form-select"
                          formControlName="country"
                          (change)="onCountryChange($event)"
                        >
                          <option value="">Choose...</option>
                          @for(item of countries; track $index){
                          <option [value]="$index" [selected]="item.name === 'India'">
                            {{ item.name }}
                          </option>
                          }
                        </select>
  
                        @if (hasError('country', 'required')) {
                        <small class="text-danger position-absolute">Country is required</small>
                        }
                      </div>
  
                  
                      <div class="review-form-name address-form w-100 my-0">
                        <label for="country" class="form-label">State*</label>
                        <select
                          id="country"
                          class="form-select"
                          formControlName="state"
                          (change)="onStateChange($event)"
                        >
                          <option value="">Choose...</option>
                          @for(item of states; track $index){
                          <option>{{ item.name }}</option>
                          }
                        </select>
                        @if (hasError('state', 'required')) {
                        <small class="text-danger position-absolute">state is required</small>
                        }
                      </div>
                    </div>
  
                  
                    <div class="review-form-name address-form">
                      <label for="street" class="form-label">Street</label>
                      <input id="street" class="form-control" formControlName="street" />
                      @if (hasError('state', 'required')) {
                      <small class="text-danger position-absolute">state is required</small>
                      }
                    </div>
  
                    
  
                    <div class="account-inner-form city-inner-form">
                      
                      <div class="review-form-name">
                        <label for="city" class="form-label">Town / City*</label>
  
                        <select id="city" class="form-select" formControlName="city">
                          <option value="">Choose...</option>
                          @for(city of cities; track $index){
                          <option>{{ city }}</option>
                          }
                        </select>
  
                        @if (hasError('city', 'required')) {
                        <small class="text-danger position-absolute">City is required</small>
                        }
                      </div>
  
                      
                      <div class="review-form-name">
                        <label for="zip" class="form-label">Postcode / ZIP*</label>
  
                        <input
                          type="text"
                          id="zip"
                          class="form-control"
                          placeholder="0000"
                          formControlName="postal_code"
                        />
  
                        @if (hasError('zip', 'required')) {
                        <small class="text-danger position-absolute">ZIP is required</small>
                        }
                      </div>
                    </div>
  
                    
                    <div class="address-form">
                      <label class="form-label mb-1">Address type</label>
                      <div class="d-flex gap-2">
                        <button
                          type="button"
                          class="btn"
                          [class.btn-outline-primary]="checkoutForm.value.type === 'home'"
                          [class.bg-light]="checkoutForm.value.type !== 'home'"
                          (click)="setAddressType('home')"
                        >
                          Home
                        </button>
  
                        <button
                          type="button"
                          class="btn"
                          [class.btn-outline-primary]="checkoutForm.value.type === 'work'"
                          [class.bg-light]="checkoutForm.value.type !== 'work'"
                          (click)="setAddressType('work')"
                        >
                          Office
                        </button>
  
                        <button
                          type="button"
                          class="btn"
                          [class.btn-outline-primary]="checkoutForm.value.type === 'other'"
                          [class.bg-light]="checkoutForm.value.type !== 'other'"
                          (click)="setAddressType('other')"
                        >
                          Others
                        </button>
                      </div>
                    </div>
                  </div>
                </form> -->
        </div>
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-secondary fs-4" data-bs-dismiss="modal">cancel</button>
          <button type="button" class="shop-btn fs-4 py-2 px-3 my-0 ms-3">Update</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Delete address Modal -->
  <div
    #removeAddressModal
    class="modal fade"
    id="removeAddress"
    tabindex="-1"
    aria-labelledby="removeAddressLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header py-2">
          <h1 class="modal-title fs-5" id="removeAddressLabel">Remove Address</h1>
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close">
             <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body fs-16">Remove address - sure?</div>
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="shop-btn ms-2" (click)="deleteAddress()">
            Remove
          </button>
        </div>
      </div>
    </div>
  </div>
  </div>
}
