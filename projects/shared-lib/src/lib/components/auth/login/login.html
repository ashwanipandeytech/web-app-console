<!--------------- login-section --------------->
<div class="modal-header justify-content-center border-0" id="loginOpened" #loginModal>
  <div class="mb-2">
    <div class="text-center mb-1">
      <img src="../images/logos/top-logo.png" alt="logo" class="img-fluid">
    </div>
    <p class="text-muted">
      @if(!isSignUp){
        Welcome Back — Great Prices Await
      }
      @if(isSignUp){
        Join Us & Enjoy Lower Prices Every Day
      }
    </p>
      <!-- <h3 class="fw-bold title mb-3"> in 10 minutes*</h3> -->
  </div>
  <button class="close-btn position-absolute top-0 end-0 mt-3 me-3" (click)="closePopup('deny')">
    <i class="fa-solid fa-xmark" aria-label="Close"></i>
  </button>
</div>
<section class="modal-body">
  <!-- Login Credential<span (click)="loginWithGoogle()">s:</span><br/>
    Email: demo-web@gmail.com <br/>
    Password: Demo@12345 -->
    @if(!isForgotPwd){
  @if (!isSignUp) {
    <ng-container [formGroup]="loginform">

        <!-- Email -->
        <div class="mb-3 position-relative">
            <input formControlName="email" id="email" class="form-control" placeholder="Enter your email"/>
            @if (submitted && f['email'].errors) {
            <div class="text-danger fs-14 position-absolute lh-0 mt-1">
              @if (f['email'].errors['required']) {
              <small>Email is required.</small>
              } @if (f['email'].errors['email']) {
              <small>Please enter a valid email address.</small>
              }
            </div>
            }
        </div>

        <!-- Password -->
        <div class="mb-3 position-relative">
          <input formControlName="password" [type]="showCurrentPassword?'text':'password'" id="password" class="form-control" placeholder="Enter your password"/>
          @if (loginform.value.password.length>1) {
          <span role="button" class="password-show position-absolute" (click)="passwordToggle('current')">
            <i class="fa-solid" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
          }
          @if (submitted && f['password'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (f['password'].errors['required']) {
            <small>Password is required.</small>
            } @if (f['password'].errors['minlength']) {
            <small>Password must be at least 6 characters.</small>
            }
          </div>
          }
        </div>

        <!-- Remember / Forgot -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="form-check" style="padding-left: 35px;">
            <input class="form-check-input" type="checkbox" id="remember">
            <label class="form-check-label small cursor-pointer fs-14" for="remember">Remember me</label>
            </div>
            <a (click)="forgotPaaword();forgotStep = 'select'" class="small text-primary fw-semibold cursor-pointer text-decoration-none hover-underline fs-14">Forgot password?</a>
        </div>

        <!-- Sign In Button -->
        <button class="shop-btn w-100 mb-3" (click)="loginUser()">Log in</button>
        <small class="fs-12 mb-3 d-block text-center fw-semibold">Or, Login With</small>
        <div class="d-flex gap-3 justify-content-center">
          <!-- Google Button -->
          <button class="btn border border-light rounded-2 mb-2 icons" (click)="loginWithGoogle()">
              <img
              src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
              width="20"
              alt="Google"
              />
              <!-- Sign in with Google -->
          </button>
  
          <!-- Google Button -->
          <button class="btn border border-light rounded-2 mb-2 icons align-items-center d-flex" (click)="loginWithFacebook()">
              <img
              src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"
              width="20"
              alt="Facebook"
              class="bg-primary"
              />
              <!-- Sign in with Facebook -->
          </button>
        </div>

        <!-- Footer -->
        <p class="text-center small text-muted mb-0 fs-16">
            Don’t have an account?
            <a class="text-primary fs-5 fw-semibold text-decoration-none cursor-pointer hover-underline" (click)="enableDisableSignUp()">
            Sign up
            </a>
        </p>
    </ng-container>
  } 
  @if (isSignUp) {
   <ng-container [formGroup]="signupForm">
        <!-- <div class="text-center mb-3">
            <small class="text-muted">Please enter your details</small>
            <h3 class="fw-bold title">Create your account </h3>
        </div> -->
        
        <div class="mb-3 position-relative">
          <input formControlName="name" id="name" class="form-control" placeholder="Enter your name" />

          @if (submittedRegister && s['name'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (s['name'].errors['required']) {
            <small>Name is required.</small>
            }
          </div>
          }
        </div>
        
        <div class="mb-3 position-relative">
          <input formControlName="email" id="email" class="form-control" placeholder="Enter your email" />
          @if (submittedRegister && s['email'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (s['email'].errors['required']) {
            <small>Email is required.</small>
            } @if (s['email'].errors['email']) {
            <small>Please enter a valid email address.</small>
            }
          </div>
          }
        </div>

        <div class="mb-3 position-relative">
          <input formControlName="phone" id="phone" class="form-control" placeholder="Enter phone number" />

          @if (submittedRegister && s['phone'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (s['phone'].errors['pattern']) {
            <small>Phone number must be exactly 10 digits.</small>
            }
          </div>
          }
        </div>

        <div class="mb-3 position-relative">
          <input
            formControlName="password"
            type="password"
            id="password"
            class="form-control"
            placeholder="Create a password"
          />

          @if (submittedRegister && s['password'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (s['password'].errors['required']) {
            <small>Password is required.</small>
            }
          </div>
          }
        </div>

        <div class="mb-3 position-relative">
          <input
            formControlName="password_confirmation"
            type="password"
            id="confirmPassword"
            class="form-control"
            placeholder="Re-enter your password"
          />

          
          @if (submittedRegister && s['password_confirmation'].errors) {
          <div class="text-danger fs-14 position-absolute lh-0 mt-1">
            @if (s['password_confirmation'].errors['required']) {
            <small>Confirm Password is required.</small>
            }
          </div>
          }
        </div>

        <!-- Remember / Forgot -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="form-check" style="padding-left: 35px;">
                <input class="form-check-input" type="checkbox" id="remember">
                <label class="form-check-label small cursor-pointer fs-14" for="remember">Remember me</label>
            </div>
        </div>

        <!-- Sign In Button -->
        <button class="shop-btn w-100 mb-3" (click)="register()">
           Register
        </button>

        <small class="fs-12 mb-3 d-block text-center fw-semibold">Or, SignUp With</small>

        <!-- Google Button -->
        <div class="d-flex gap-3 justify-content-center">
          <!-- Google Button -->
          <button class="btn border border-light rounded-2 mb-2 icons">
              <img
              src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
              width="20"
              alt="Google"
              />
              <!-- Sign up with Google -->
          </button>
  
          <!-- Google Button -->
          <button class="btn border border-light rounded-2 mb-2 icons align-items-center d-flex">
              <img
              src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"
              width="20"
              alt="Facebook"
              class="bg-primary"
              />
              <!-- Sign up with Facebook -->
          </button>
        </div>

        <!-- Footer -->
        <p class="text-center small text-muted mb-0 fs-16">
            Already have an account?
            <a class="text-primary fs-5 fw-semibold text-decoration-none cursor-pointer hover-underline" (click)="enableDisableSignUp()">
            Log in
            </a>
        </p>

  </ng-container>

  }
      
    }


@if(isForgotPwd){
  <i class="fa fa-arrow-left" aria-hidden="true" (click)="goBack()"></i>
  <div *ngIf="forgotStep === 'select'">
    <button class="shop-btn w-100 mb-2" (click)="resetVia('otp')">
      Reset via Otp
    </button>
  
    <button class="btn btn-outline-secondary w-100" (click)="resetVia('email')">
      Reset via Email
    </button>
  </div>




  <!-- <div *ngIf="forgotStep === 'phone'" [formGroup]="forgotPhoneForm">
  <input class="form-control mb-2" placeholder="Enter phone number" formControlName="email">

  <button class="shop-btn w-100"
    [disabled]="forgotPhoneForm.invalid || otpTimerRunning"
    (click)="sendOtp('otp')">
    Get OTP
  </button>
</div> -->

  <div *ngIf="forgotStep === 'otp'" [formGroup]="otpForm">
  <input class="form-control mb-2" placeholder="Enter OTP" formControlName="otp">
    <span (click)="!otpTimerRunning?resendOtp():''">

      {{ otpTimerRunning ? 'Resend OTP in ' + timer : 'Resend OTP' }}
    </span>

  <button class="shop-btn w-100" (click)="verifyOtp()">
    Submit OTP
  </button>
</div>
 <div *ngIf="forgotStep === 'reset-password'" [formGroup]="resetPasswordForm">
  <input class="form-control mb-2" type="password" placeholder="New password" formControlName="password">
  <input class="form-control mb-2" type="password" placeholder="Confirm password" formControlName="confirmPassword">

  <small class="text-danger"  *ngIf="resetPasswordForm.errors?.['mismatch']">
    Passwords do not match
  </small>

  <button class="shop-btn w-100" [disabled]="resetPasswordForm.invalid" (click)="setPassword()">
    Set Password
  </button>
</div> 
<div *ngIf="forgotStep === 'email'" [formGroup]="forgotEmailForm">
  <input class="form-control mb-2" placeholder="Enter email" formControlName="email">

    <button class="shop-btn w-100" (click)="sendOtp(resetPasswordVia)">
    {{ resetPasswordVia == 'otp' ? ' Get Otp' : 'Get Link' }}

    </button>
</div>

}



</section>
<!--------------- login-section-end --------------->
