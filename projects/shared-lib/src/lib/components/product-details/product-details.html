<div class="d-flex d-none align-items-center bg-light p-1">
  <button class="btn btn-light d-flex align-items-center" (click)="back()">
    <svg
      fill="none"
      height="24"
      viewBox="0 0 24 24"
      width="24"
      xmlns="http://www.w3.org/2000/svg"
      style="height: 1.5rem; width: 1.5rem; color: black"
    >
      <path
        d="M15.5 19L8.5 12L15.5 5"
        stroke="black"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2.5"
      ></path>
    </svg>
    <span class="d-inline-block">Back</span>
  </button>
</div>

<!-- @if(loading){
<div class="loader position-relative">
    <div class="spinner position-absolute top-50 start-50 translate-middle"></div>
</div>
} -->

<!--------------- products-info-section--------------->
<section class="product product-info bg-light pt-0 mb-5">
  <div class="container">
    <div class="blog-bradcrum d-none d-sm-block py-4">
      <span><a href="/">Home</a></span>
      <span class="devider">/</span>
      <span><a href="/category-details/all">Shop</a></span>
      <span class="devider">/</span>
      <span class="fw-semibold">Product Details</span>
    </div>

    <div class="product-info-section">
      <div class="row">
        <div class="col-lg-6 col-md-7 col-12 mt-0">

          <div class="product-gallery d-flex gap-2">
            <!-- LEFT THUMBNAILS -->
            <div class="thumb-slider d-md-inline-block d-none">
              <ngx-slick-carousel class="slick-thumb" [config]="thumbConfig">
                @for (item of productDetails.images; track $index) {
                  <div
                    ngxSlickItem
                    class="thumb-item cursor-pointer"
                    (click)="goToSlide($index)"
                    [ngClass]="{
                      'border-primary': activeIndex === $index,
                      'rounded-2': activeIndex === $index
                    }"
                  >
                    <img [src]="item.url" alt="thumb" class="object-fit-contain w-100" height="70" />
                  </div>
                }
              </ngx-slick-carousel>
            </div>

            <!-- MAIN IMAGE -->
            <div class="main-slider position-relative rounded-2 p-2 bg-white rounded-4">
              <!-- Badge -->
              <span class="badge new-launch position-absolute bg-danger text-white fs-12 py-1 px-2 rounded-1 z-3 top-0 start-0 ms-3 mt-3">New Launches</span>

              <!-- Wishlist -->

              @if(isLogin==true){
              <button
                class="wishlist-btn position-absolute top-0 end-0 mt-2 me-2 z-3 rounded-pill p-2 shadow"
                (click)="toggleHeart(productDetails)"
                [ngClass]="{ wishlisted: productDetails.is_wishlisted }"
              >
                <i
                  class="fa-heart"
                  [ngClass]="productDetails.is_wishlisted ? 'fa-solid text-primary' : 'fa-regular'"
                ></i>
              </button>
            }

              <ngx-slick-carousel
                class="slick-main slick-carousel"
                #mainSlick="slick-carousel"
                [config]="mainConfig"
                (afterChange)="onMainAfterChange($event)"
              >
                @for (item of productDetails.images; track $index) {
                  <div ngxSlickItem class="main-img">
                    <img [src]="item.url" alt="product" class="w-100 object-fit-contain" />
                  </div>
                }
              </ngx-slick-carousel>

               <div class="d-flex justify-content-center gap-2 cta-actions mt-2">
                <button (click)="addToCart()" class="shop-btn w-100">Add to Cart</button>
                <button (click)="addToCart('buy')" class="shop-btn w-100 shop-btn-warning">Buy now</button>
              </div>

            </div>
          </div>
        </div>

        <div class="col-lg-6 col-md-5 col-12 mt-0">
          <div class="product-info-content bg-white rounded-4 h-100" data-aos="fade-left">
            <div class="product-info-content-price rounded-3 mb-3">
              <span class="wrapper-subtitle">{{ productDetails?.category?.name }}</span>
              <h3 class="wrapper-heading fs-20 mt-2">{{ productDetails?.title }}</h3>

              <div class="d-flex justify-content-between mt-2">
                <div class="price my-0 gap-2">
                  <span class="price-cut">₹{{ productDetails?.price_data?.regularPrice }}</span>
                  <span class="new-price">₹{{ productDetails?.price_data?.salePrice }}</span>
                </div>
              </div>

              <div class="product-quantity align-items-start justify-content-start mt-2">


                                    <div class="rating d-flex align-items-center gap-2">

  <!-- Stars -->
  <div class="stars">
    @for (star of ratingStars; track star) {
     <i
    [ngClass]="star <= productDetails.rating.average
      ? 'fa-solid fa-star text-warning'
      : 'fa-regular fa-star text-muted'">
  </i>
    }
  </div>

  <!-- Average -->
  <span class="fw-semibold">
    {{ productDetails.rating.average }}/5
  </span>

  <!-- Total -->
  <span class="text-muted fs-12">
    ({{ productDetails.rating.total }} rating{{ productDetails.rating.total > 1 ? 's' : '' }})
  </span>

</div>
                <!-- <div class="ratings mt-0">
                  <span>
                    <svg
                      width="75"
                      height="15"
                      viewbox="0 0 75 15"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M7.5 0L9.18386 5.18237H14.6329L10.2245 8.38525L11.9084 13.5676L7.5 10.3647L3.09161 13.5676L4.77547 8.38525L0.367076 5.18237H5.81614L7.5 0Z"
                        fill="#FFA800"
                      ></path>
                      <path
                        d="M22.5 0L24.1839 5.18237H29.6329L25.2245 8.38525L26.9084 13.5676L22.5 10.3647L18.0916 13.5676L19.7755 8.38525L15.3671 5.18237H20.8161L22.5 0Z"
                        fill="#FFA800"
                      ></path>
                      <path
                        d="M37.5 0L39.1839 5.18237H44.6329L40.2245 8.38525L41.9084 13.5676L37.5 10.3647L33.0916 13.5676L34.7755 8.38525L30.3671 5.18237H35.8161L37.5 0Z"
                        fill="#FFA800"
                      ></path>
                      <path
                        d="M52.5 0L54.1839 5.18237H59.6329L55.2245 8.38525L56.9084 13.5676L52.5 10.3647L48.0916 13.5676L49.7755 8.38525L45.3671 5.18237H50.8161L52.5 0Z"
                        fill="#FFA800"
                      ></path>
                      <path
                        d="M67.5 0L69.1839 5.18237H74.6329L70.2245 8.38525L71.9084 13.5676L67.5 10.3647L63.0916 13.5676L64.7755 8.38525L60.3671 5.18237H65.8161L67.5 0Z"
                        fill="#FFA800"
                      ></path>
                    </svg>
                  </span>

                  <span class="text text badge bg-light ms-2 fs-16">6 Reviews</span>
                </div> -->
              </div>
            </div>
            @if (productDetails?.product_details?.shortDescription) {
              <div
                class="text-break"
                [innerHTML]="productDetails?.product_details?.shortDescription"
              ></div>
            }

            <hr class="border-dark my-2" />

            <div class="d-sm-flex align-items-center">
              <div class="fs-16">
                <span>Availabillity : </span>
                <strong class="inner-text text-black fw-semibold"
                  >{{ productDetails.inventory.manageStock }} Products Available</strong
                >
              </div>

              <div class="product-share mt-2 mt-sm-0 gap-2 ms-auto">
                <p class="mb-0">Share With :</p>
                <div class="social-item d-flex gap-2">
                  <a href="#" class="social-icon instagram" title="Instagram">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-instagram-icon lucide-instagram"
                    >
                      <rect width="20" height="20" x="2" y="2" rx="5" ry="5" />
                      <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                      <line x1="17.5" x2="17.51" y1="6.5" y2="6.5" />
                    </svg>
                  </a>
                  <a href="#" class="social-icon facebook" title="Facebook">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-facebook-icon lucide-facebook"
                    >
                      <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />
                    </svg>
                  </a>
                </div>
              </div>
            </div>

            <hr class="border-dark my-2" />

            <div class="product-details">
              <p class="category">
                Category :
                <strong class="inner-text text-black fw-semibold">{{
                  productDetails.category.name
                }}</strong>
              </p>
              <p class="tags">
                Tags :
                @for (tag of productDetails.tags.tags; track $index) {
                  <strong class="inner-text text-black fw-semibold">{{ tag }}</strong>
                }
              </p>
              <p class="sku">
                SKU :
                <strong class="inner-text text-black fw-semibold">{{ productDetails.sku }}</strong>
              </p>
            </div>

            <hr class="text-dark" />

            <div class="d-none product-report">
              <a href="#" class="report" onclick="modalAction('.action')">
                <span>
                  <svg
                    width="15"
                    height="16"
                    viewbox="0 0 15 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0 0C0.30478 0 0.585152 0 0.897442 0C0.908707 0.197137 0.919972 0.389267 0.932488 0.607056C1.30235 0.482516 1.64781 0.347336 2.00391 0.250332C3.83134 -0.247829 5.5555 0.0450599 7.19017 0.959399C7.97121 1.39686 8.7898 1.71165 9.68599 1.81178C10.9308 1.95072 12.0873 1.6716 13.1813 1.08832C13.4566 0.941876 13.7257 0.783541 14.0443 0.604553C14.0505 0.745991 14.0599 0.853634 14.0599 0.960651C14.0605 3.92396 14.058 6.88665 14.0662 9.84996C14.0668 10.079 13.9961 10.2042 13.7964 10.3143C11.4702 11.5973 9.14277 11.6123 6.82531 10.3106C4.99976 9.28546 3.14292 9.1484 1.22162 10.0164C0.990065 10.1209 0.908081 10.2524 0.909958 10.5096C0.921849 12.21 0.916217 13.911 0.916217 15.6114C0.916217 15.7353 0.916217 15.8586 0.916217 16C0.600172 16 0.312916 16 0 16C0 10.6779 0 5.35336 0 0Z"
                      fill="#EB5757"
                    ></path>
                  </svg>
                </span>
                <span>Report This Item</span>
              </a>
              <!-- modal -->
              <div class="modal-wrapper action">
                <div onclick="modalAction('.action')" class="anywhere-away"></div>

                <!-- change this -->
                <div class="login-section account-section modal-main">
                  <div class="review-form">
                    <div class="review-content">
                      <h5 class="comment-title">Report Products</h5>
                      <div class="close-btn">
                        <img
                          src="../images/homepage-one/close-btn.png"
                          onclick="modalAction('.action')"
                          alt="close-btn"
                        />
                      </div>
                    </div>
                    <div class="review-form-name address-form">
                      <label for="reporttitle" class="form-label">Enter Report Ttile*</label>
                      <input
                        type="text"
                        id="reporttitle"
                        class="form-control"
                        placeholder="Reports Headline here"
                      />
                    </div>
                    <div class="review-form-name address-form">
                      <label for="reportnote" class="form-label">Enter Report Note*</label>
                      <textarea
                        name="ticketmassage"
                        id="reportnote"
                        cols="40"
                        rows="3"
                        class="form-control"
                        placeholder="Type Here"
                      ></textarea>
                    </div>
                    <div class="login-btn text-center">
                      <a href="#" onclick="modalAction('.action')" class="shop-btn"
                        >Submit Report</a
                      >
                    </div>
                  </div>
                </div>
                <!-- change this -->
              </div>
            </div>

            <!-- product-feature  -->
            <div class="mt-3">
              <!-- <h5 class="mb-2">Features :</h5> -->
              @if (productDetails?.product_details?.features) {
                <div
                  class="text-break innerHtml fs-5"
                  [innerHTML]="productDetails?.product_details?.features"
                ></div>
              }
            </div>
          </div>
        </div>
      </div>

      <section class="product product-description mt-4">
        <div class="container">
          <div class="product-detail-section">
            <nav>
              <div class="nav nav-tabs nav-item" id="nav-tab" role="tablist">
                <button
                  class="nav-link text-dark active"
                  id="nav-home-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#nav-home"
                  type="button"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                >
                  Description
                </button>

                <button
                  class="nav-link text-dark"
                  id="nav-review-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#nav-review"
                  type="button"
                  role="tab"
                  aria-controls="nav-review"
                  aria-selected="false"
                >
                  Reviews
                </button>
              </div>
            </nav>
            <div class="tab-content tab-item" id="nav-tabContent">
              <div
                class="tab-pane fade show active"
                id="nav-home"
                role="tabpanel"
                aria-labelledby="nav-home-tab"
                tabindex="0"
              >
                <div class="product-intro-section">
                  <!-- <h5>Introduction</h5> -->
                  @if (productDetails?.product_details?.productDescription) {
                    <div
                      class="innerHtml"
                      [innerHTML]="productDetails?.product_details?.productDescription"
                    ></div>
                  }
                  @if (productDetails?.product_details?.productDescriptionImageGallery) {
                    <div
                      class="innerHtml product-detail"
                      [innerHTML]="safeContent"
                    ></div>
                  }
                </div>
                <!-- <div [innerHTML]="item.product_details.features"></div> -->
              </div>

              <div
                class="tab-pane fade"
                id="nav-review"
                role="tabpanel"
                aria-labelledby="nav-review-tab"
                tabindex="0"
              >
                <div class="product-review-section">
                  <!-- <h5>Reviews</h5> -->

                  <div class="review-wrapper py-0">
                    <div class="wrapper">
                      <div class="wrapper-aurthor">
                        <div class="wrapper-info gap-2">
                          <div class="aurthor-img">
                            <img
                              src="../images/homepage-one/aurthor-img-1.webp"
                              alt="aurthor-img"
                            />
                          </div>
                          <div class="author-details">
                            <h5>Sajjad Hossain</h5>
                            <p class="mb-0">London, UK</p>
                          </div>
                        </div>
                        <div class="ratings">
                          <span>
                            <svg
                              width="75"
                              height="15"
                              viewbox="0 0 75 15"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                d="M7.5 0L9.18386 5.18237H14.6329L10.2245 8.38525L11.9084 13.5676L7.5 10.3647L3.09161 13.5676L4.77547 8.38525L0.367076 5.18237H5.81614L7.5 0Z"
                                fill="#FFA800"
                              ></path>
                              <path
                                d="M22.5 0L24.1839 5.18237H29.6329L25.2245 8.38525L26.9084 13.5676L22.5 10.3647L18.0916 13.5676L19.7755 8.38525L15.3671 5.18237H20.8161L22.5 0Z"
                                fill="#FFA800"
                              ></path>
                              <path
                                d="M37.5 0L39.1839 5.18237H44.6329L40.2245 8.38525L41.9084 13.5676L37.5 10.3647L33.0916 13.5676L34.7755 8.38525L30.3671 5.18237H35.8161L37.5 0Z"
                                fill="#FFA800"
                              ></path>
                              <path
                                d="M52.5 0L54.1839 5.18237H59.6329L55.2245 8.38525L56.9084 13.5676L52.5 10.3647L48.0916 13.5676L49.7755 8.38525L45.3671 5.18237H50.8161L52.5 0Z"
                                fill="#FFA800"
                              ></path>
                              <path
                                d="M67.5 0L69.1839 5.18237H74.6329L70.2245 8.38525L71.9084 13.5676L67.5 10.3647L63.0916 13.5676L64.7755 8.38525L60.3671 5.18237H65.8161L67.5 0Z"
                                fill="#FFA800"
                              ></path>
                            </svg>
                          </span>
                          <span>(5.0)</span>
                        </div>
                      </div>
                      <div class="wrapper-description">
                        <p class="wrapper-details mt-2">
                          Lorem Ipsum is simply dummy text of the printing and typesetting industry.
                          Lorem Ipsum has been the industry's standard dummy text ever since the
                          redi 1500s, when an unknown printer took a galley of type and scrambled it
                          to make a type specimen book. It has survived not only five centuries but
                          also the on leap into electronic typesetting, remaining
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</section>
<!---------------  products-info-end  --------------->
