<!-- @if(isLoading){
<div class="loader d-flex align-items-center justify-content-center">
  <div class="spinner-border spinner-border-lg text-primary" role="status"></div>
</div>
} -->
@if (!isLoading) {
  <div class="d-flex d-none align-items-center bg-light p-1">
    <button class="btn btn-light d-flex align-items-center" (click)="back()">
      <svg
        fill="none"
        height="24"
        viewBox="0 0 24 24"
        width="24"
        xmlns="http://www.w3.org/2000/svg"
        style="height: 1.5rem; width: 1.5rem; color: black"
      >
        <path
          d="M15.5 19L8.5 12L15.5 5"
          stroke="black"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2.5"
        ></path>
      </svg>
      <span class="d-inline-block" style="height: 24px; line-height: 24px">Back</span>
    </button>
  </div>

  <!--------------- blog-tittle-section---------------->
  <section class="p-2 d-none">
    <div class="container">
      <div class="blog-bradcrum">
        <span><a href="/">Home</a></span>
        <span class="devider px-2">/</span>
        <span><a href="/category">Category</a></span>
        <span class="devider px-2">/</span>
        <span class="text-muted">Cow</span>
        <!-- </div> -->
        <!-- <div class="blog-heading text-center flex-grow-1">
                <h1 class="heading">Category</h1>
            </div> -->
      </div>
    </div>
  </section>
  <!--------------- blog-tittle-section-end---------------->

  <!--------------- products-sidebar-section--------------->
  <section class="product-sidebar pt-2 pt-lg-3 pb-5">
    <div class="container px-2 px-lg-3">
      <div class="row g-2 g-lg-3">
        <div class="col-2 d-none">
          <div class="sidebar h-100">
            <div class="sidebar-section h-100">
              <div class="sidebar-wrapper">
                <!-- <h3 class="wrapper-heading">Product Categories</h3> -->
                <div class="sidebar-item">
                  @if (this.productListData.length > 0) {
                    <ul class="sidebar-list">
                      @for (control of categoryListData; track $index) {
                        <li class="w-100 p-2 p-lg-1">
                          <img src="{{ control.thumbnail }}" alt="" />
                          <span class="fw-semibold lh-1">{{ control.name }}</span>
                        </li>
                      }
                    </ul>
                  }
                  <!-- {{this.productListData.length}} -->
                  <!-- @if (isLoading) {
                <div class="loader position-relative">
                  <div class="spinner position-absolute top-50 start-50 translate-middle"></div>
                </div>
                } -->
                  @if (!productListData || productListData.length === 0) {
                    <app-no-data
                      title="No Category Found"
                      message="There are no data available right now."
                      [showAction]="false"
                      actionText="Reload"
                    >
                    </app-no-data>
                  }
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 mt-sm-5">
          <div class="product-sidebar-section">
            <div class="row g-2 g-lg-3">
              <!-- Pagination start -->
              <div class="col-lg-12 d-none">
                <div class="product-sorting-section py-2">
                  <div class="result pe-5">
                    <p class="fs-16">Showing <span>1–16 of 66 results</span></p>
                  </div>
                  <div class="product-sorting">
                    <span class="product-sort fs-16">Sort by:</span>
                    <div class="dropdown position-static">
                      <button
                        class="btn btn-light fs-16 py-1"
                        type="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        Default
                        <span class="ps-3">
                          <svg
                            width="10"
                            height="6"
                            viewbox="0 0 10 6"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path d="M1 1L5 5L9 1" stroke="#9A9A9A"></path>
                          </svg>
                        </span>
                      </button>

                      <ul class="dropdown-menu py-0 border-0 shadow">
                        @for (control of categoryListData; track $index) {
                          <li class="border-bottom opacity-75">
                            <a class="dropdown-item fs-16" href="#">{{ control.name }}</a>
                          </li>
                        }
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Pagination end -->

              <!-- Product start -->
              <!-- @if (this.productListData.length>0) { -->

              @for (item of productListData; track $index) {
                <div class="col-lg-3 col-md-4 col-6">
                  <div
                    class="product-wrapper me-3 bg-white p-3 rounded-2 d-flex flex-column border"
                  >
                    <div class="product-img aspect-ratio-1" style="height: 200px">
                      <a (click)="openProduct(item)" class="h-100 w-100 overflow-hidden">
                        <img [src]="item?.images[0]?.url" alt="product-img" class="h-100 w-100" />
                      </a>

                       @if(isLogin==true){
                        <div
                          class="product-cart-items bg-white rounded p-1"
                          (click)="toggleHeart(item)"
                          [ngClass]="{ wishlisted: item.is_wishlisted }"
                        >
                          <i
                            class="fa-heart"
                            [ngClass]="item.is_wishlisted ? 'fa-solid text-primary' : 'fa-regular'"
                          ></i>
                        </div>
                       }
                    </div>

                    <div class="product-info pb-0 h-100">
                      <a (click)="openProduct(item)"
                        class="product-details fs-14 fw-semibold text-dark text-capitalize"
                        >{{ item.title }}</a
                      >
                      <!-- <div class="product-description d-md-flex align-items-center justify-content-between w-100 my-2">
                      </div> -->
                      <div class="price gap-2 my-1">
                        <span class="price-cut fs-16">₹{{ item.price_data.regularPrice }}</span>
                        <span class="new-price fs-16">₹{{ item.price_data.salePrice }}</span>
                      </div>

                      <div class="rating d-sm-flex align-items-center gap-2 mb-2">
                        <!-- Stars -->
                        <div class="stars">
                          @for (star of ratingStars; track star) {
                            <!-- <pre>{{ratingStars | json}}</pre> -->
                            <i
                              [ngClass]="
                                star <= item.rating.average
                                  ? 'fa-solid fa-star text-warning'
                                  : 'fa-regular fa-star text-muted'
                              "
                            >
                            </i>
                          }
                        </div>

                        <!-- Average -->
                        <span class="fw-semibold"> {{ item.rating.average }}/5 </span>

                        <!-- Total -->
                        <span class="text-muted fs-12">
                          ({{ item.rating.total }} rating{{ item.rating.total > 1 ? 's' : '' }})
                        </span>
                      </div>

                      <button
                        type="button"
                        class="product-btn w-auto shop-btn mt-auto"
                        (click)="addToCart(item)"
                      >
                        Add to Cart
                      </button>
                    </div>
                  </div>
                </div>
              }
              @if (!productListData || productListData.length === 0) {
                <app-no-data
                  title="No Product Found"
                  message="There are no data available right now."
                  [showAction]="false"
                  actionText="Reload"
                >
                </app-no-data>
              }
              <!-- } -->
              <!-- @if (this.productListData.length<=0) {
                                   <div class="container text-center py-4 text-muted display-1">
                                    <i class="fa-solid fa-circle-info me-2"></i>
                                    NO DATA AVAILABLE
                                    </div>
                                } -->
              <!-- Product end -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--------------- products-sidebar-section-end--------------->
}
