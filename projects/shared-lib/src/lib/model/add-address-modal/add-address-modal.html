<div class="modal-header">
    <input 
    type="text" 
    (input)="searchAddress($event)"
    [value]="searchText"
    class="form-control"
    placeholder="Enter address..." >
    @if (suggestions.length) {
    <select>
        @for (s of suggestions; track $index) {
        <option (click)="selectSuggestion(s)"> {{ s.display_name }} </option>
        }
    </select>
    }

    <button class="btn btn-primary mt-2" (click)="getCurrentLocation()">
    Use Current Location
    </button>

    <h1 class="modal-title fs-5" id="addressModalLabel">New address details</h1>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">

    @if (isNewAddress) {
        <ng-container>
            <div class="d-flex align-items-start bg-primary-light rounded p-3 mb-3">
                <img src="assets/images/svg/indictor.svg" alt="" class="pt-1">
                <p class="fs-14 ms-1 mb-0">
                    <span class="d-block">Area name</span>
                    <span class="fs-12">Address here 256, Street 65/4, Address here 256, Street 65/4</span>
                </p>
            </div>
    
            <!-- Reactive Form -->
            <form [formGroup]="addressForm">
                <div class="mb-3">
                    <label class="form-label fw-semibold mb-1">Full name</label>
                    <input type="text" class="form-control" formControlName="name">
                </div>
                <div class="mb-3">
                    <label class="form-label fw-semibold mb-1">Phone</label>
                    <input type="text" class="form-control" formControlName="phone">
                </div>
                <div class="mb-3">
                    <label class="form-label mb-1">
                        <span class="fw-semibold">Street</span>
                    </label>
                    <input type="text" class="form-control" formControlName="street">
                </div>
                <div class="mb-3">
                    <label class="form-label mb-1">
                        <span class="fw-semibold">City</span>
                    </label>
                    <input type="text" class="form-control" formControlName="city">
                </div>
                <div class="mb-3">
                    <label class="form-label mb-1">
                        <span class="fw-semibold">State</span> 
                    </label>
                    <input type="text" class="form-control" formControlName="state">
                </div>
                <div class="mb-3">
                    <label class="form-label mb-1">
                        <span class="fw-semibold">Postal Code</span> 
                    </label>
                    <input type="text" class="form-control" formControlName="postal_code">
                </div>
                <div class="mb-3">
                    <label class="form-label mb-1">
                        <span class="fw-semibold">Country</span> 
                    </label>
                    <input type="text" class="form-control" formControlName="country">
                </div>
                <div class="mb-3">
                    <label class="form-label fw-semibold mb-1">Address type</label>
    
                    <div class="d-flex gap-2">
                        <button 
                            type="button" 
                            class="btn"
                            [class.btn-outline-primary]="addressForm.value.type === 'home'"
                            [class.bg-light]="addressForm.value.type !== 'home'"
                            (click)="setAddressType('home')">
                            Home
                        </button>
    
                        <button 
                            type="button" 
                            class="btn"
                            [class.btn-outline-primary]="addressForm.value.type === 'work'"
                            [class.bg-light]="addressForm.value.type !== 'work'"
                            (click)="setAddressType('work')">
                            Office
                        </button>
    
                        <button 
                            type="button" 
                            class="btn"
                            [class.btn-outline-primary]="addressForm.value.type === 'other'"
                            [class.bg-light]="addressForm.value.type !== 'other'"
                            (click)="setAddressType('other')">
                            Others
                        </button>
                    </div>
                </div>
    
                <button class="btn btn-primary mt-2" type="submit" (click)="submitForm()">
                    Save Address
                </button>
            </form>
        </ng-container>
    }
@if (!isNewAddress) {

    <ng-container *ngIf="!isNewAddress">
        <button class="btn bg-primary-light text-primary w-100" (click)="newAddress()">
            <i class="bi bi-plus"></i> Add new address
        </button>
        <hr />

        <div>
            <p class="fs-14 text-muted mb-2">Saved addresses</p>
            <div class="form-check mb-3">
                @for (item of addressListData; track item.id; let i = $index) {
                <input 
                class="form-check-input" 
                type="radio" 
                name="selectedAddress" 
                [id]="'addressRadio' + i"
                [value]="item"
                (change)="onSelectAddress(item)">
                <label class="form-check-label fs-14" [for]="'addressRadio' + i">{{item.street}} {{item.city}}, {{item.state}} - {{item.postal_code}}</label>
                }
                <!-- <span class="d-block fs-12 text-muted">Address here 256, Street 65/4, 635412</span> -->
            </div>
            <!-- <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="radioDefault" id="radioDefault1">
                <label class="form-check-label fs-14" for="radioDefault1">Address name</label>
                <span class="d-block fs-12 text-muted">Address here 256, Street 65/4, 635412</span>
            </div>
            <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="radioDefault" id="radioDefault1">
                <label class="form-check-label fs-14" for="radioDefault1">Address name</label>
                <span class="d-block fs-12 text-muted">Address here 256, Street 65/4, 635412</span>
            </div> -->
        </div>
    </ng-container>
}
</div>
<div class="modal-footer" *ngIf="isNewAddress">
    <button type="button" class="btn btn-primary w-100">Save address</button>
</div>